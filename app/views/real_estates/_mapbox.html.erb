<script src='https://api.mapbox.com/mapbox-gl-js/v2.1.1/mapbox-gl.js'></script>
<link href='https://api.mapbox.com/mapbox-gl-js/v2.1.1/mapbox-gl.css' rel='stylesheet' />
<div id='map' data-markers="<%= @markers.to_json%>" style='width: 400px; height: 300px;'>
</div>
<script>
mapboxgl.accessToken = '<%= ENV['MAPBOX_API_KEY'] %>';
var map = new mapboxgl.Map({
  container: 'map',
  style: 'mapbox://styles/mapbox/streets-v11',
  center: [3.501873,44.517611],
  zoom: 8,
});

markers.forEach((marker)=> {
  new maxpboxg.Marker()
  .setLngLat([ marker.lng, marker.lat ])
  .setPopup(new mapboxgl.Popup({ offset: 25})
    .setHTML( "<h1> Hello World!</h1>"))
}).addTo(map);


</script>

